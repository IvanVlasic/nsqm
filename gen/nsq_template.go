package gen

import "text/template"

var nsqTemplate = template.Must(template.New("").Parse(`// Code generated by go generate; DO NOT EDIT.
package nsq

import (
	"github.com/minus5/nsqm"
  "{{.ApiPkgPath}}"
)

var (
  reqTopic = "{{.NsqTopic}}"
)

func Client(cfg *nsqm.Config) (*api.Client, error) {
	rpcClient, err := nsqm.NewRpcClient(cfg, reqTopic)
	if err != nil {
		return nil, err
	}
	return api.NewClient(rpcClient), nil
}


type Closer interface {
	Stop()
	Close()
}

func Server(cfg *nsqm.Config, srv nsqm.AppServer) (Closer, error) {
	return nsqm.NewRpcServer(cfg, reqTopic, srv)
}
`))
